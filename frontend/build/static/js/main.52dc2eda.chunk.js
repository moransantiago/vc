(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{117:function(t,n){},119:function(t,n){},146:function(t,n){},151:function(t,n,e){"use strict";e.r(n);var r=e(1),a=e.n(r),o=e(71),i=e.n(o),c=e(17),u=e(9),l=e(10),s=Object(r.createContext)(),d=function(t){var n=t.children,e=Object(r.useState)((function(){return window.sessionStorage.getItem("token")})),o=Object(l.a)(e,2),i=o[0],c=o[1],u={isAuth:i,activateAuth:function(){return c(!0)},removeAuth:function(){c(!1),window.sessionStorage.removeItem("token")}};return a.a.createElement(s.Provider,{value:u},n)},f=(s.Consumer,e(14)),p=e(31),m=e(8),b=e.n(m),v=e(16),h=e(3),x=e(4);function g(){var t=Object(h.a)(["\n\tborder-radius: 3px;\n\tpadding: 8px;\n\tfont-size: 14px;\n\tcursor: pointer;\n\tcolor: #ededed;\n\t&:hover {\n\t\tbackground-color: #2d2d2d;\n\t}\n"]);return g=function(){return t},t}function j(){var t=Object(h.a)(["\n\tdisplay: flex;\n\tjustify-content: flex-start;\n\talign-items: center;\n\theight: 100%;\n\tpadding: 1%;\n"]);return j=function(){return t},t}function w(){var t=Object(h.a)(["\n\tfont-family: BalooPaaji;\n\tfont-size: 16px;\n\tborder-radius: 3px;\n\tborder: 0;\n\theight: 34px;\n\twidth: 90px;\n\tfont-size: 16px;\n\tbackground-color: #c86740;\n\tcolor: #e6e6e6;\n\tfont-weight: bold;\n\ttext-align: center;\n\tpadding: 5px;\n\tmargin-left: auto;\n\t&:hover {\n\t\tbackground-color: #9b5134;\n\t\tcolor: #aeaeae;\n\t}\n"]);return w=function(){return t},t}function E(){var t=Object(h.a)(["\n\tcolor: #ededed;\n\tmargin-left: 15px;\n\tfont-size: 17px;\n\tfont-weight: bold;\n"]);return E=function(){return t},t}function O(){var t=Object(h.a)(["\n\tdisplay: flex;\n\talign-items: center;\n\tcursor: pointer;\n\theight: 100%;\n\tpadding: 0 18px;\n\tborder-top: 1px solid transparent;\n\tborder-right: 1px solid #3c3c3c;\n\tborder-bottom: 1px solid transparent;\n\tborder-left: 1px solid transparent;\n\t&:hover {\n\t\tbackground-color: #1e1e1e;\n\t}\n"]);return O=function(){return t},t}function y(){var t=Object(h.a)(["\n\tdisplay: flex;\n\tflex-direction: row;\n\tjustify-content: flex-start;\n\talign-items: center;\n\tmin-height: 50px;\n\theight: 50px;\n\twidth: 100vw;\n\tpadding: 0 20px;\n\tbackground-color: #242424;\n"]);return y=function(){return t},t}function k(){var t=Object(h.a)(["\n\tborder-radius: 50%;\n\toverflow: hidden;\n\tobject-fit: cover;\n\theight: 35px;\n\twidth: 35px;\n"]);return k=function(){return t},t}var _=x.c.img(k()),z=x.c.div(y()),I=x.c.span(O()),C=x.c.p(E()),S=Object(x.c)(f.a)(w()),M=x.c.div(j()),N=x.c.span(g()),q=function(t){var n=t.username,e=Object(r.useContext)(s).removeAuth;return a.a.createElement(z,null,a.a.createElement(I,null,a.a.createElement(_,{src:"https://citas.in/media/authors/diego-maradona.detail.jpg"}),a.a.createElement(C,null,n)),a.a.createElement(M,null,a.a.createElement(f.a,{to:"/servers"},a.a.createElement(N,null,"Servers"))),a.a.createElement(S,{to:"/",onClick:e},"Log out"))};function B(){var t=Object(h.a)(["\n\tcolor: #4a4a4a;\n\ttext-align: center;\n\ttext-decoration: none;\n\tposition: relative;\n\tdisplay: flex;\n\t&[aria-current] {\n\t\t&:before {\n\t\t\tcontent: '';\n\t\t\tposition: absolute;\n\t\t\twidth: 8px;\n\t\t\theight: 20%;\n\t\t\ttop: 40%;\n\t\t\tleft: -18px;\n\t\t\tborder-radius: 50%;\n\t\t\tbackground: #ffffff;\n\t\t\tcursor: pointer;\n\t\t}\n\t}\n"]);return B=function(){return t},t}function R(){var t=Object(h.a)(["\n\tall: unset;\n\twidth: 100%;\n"]);return R=function(){return t},t}function P(){var t=Object(h.a)(["\n\tmargin-bottom: 25px;\n"]);return P=function(){return t},t}function U(){var t=Object(h.a)(["\n\tfont-size: 18px;\n\tcolor: #ededed;\n"]);return U=function(){return t},t}function A(){var t=Object(h.a)(["\n\tfont-size: 24px;\n\tfont-weight: bolder;\n\tcolor: #ededed;\n"]);return A=function(){return t},t}function D(){var t=Object(h.a)(["\n\tpadding: 10px;\n\theight: 61px;\n\tbackground-color: #3c3c3c;\n\tborder-bottom: 1px solid #4d4d4d;\n"]);return D=function(){return t},t}function F(){var t=Object(h.a)(["\n\tpadding: 15px;\n\toverflow-y: auto;\n"]);return F=function(){return t},t}function L(){var t=Object(h.a)(["\n\tdisplay: flex;\n\tflex-direction: column;\n\tpadding: 0;\n\tbackground-color: #3c3c3c;\n"]);return L=function(){return t},t}var V=x.c.div(L()),$=x.c.div(F()),Q=x.c.span(D()),T=x.c.h1(A()),H=x.c.h1(U()),K=x.c.div(P()),W=x.c.button(R()),J=Object(x.c)(f.a)(B());function Y(){var t=Object(h.a)(["\n\tfont-size: 15px;\n\tfont-weight: bolder;\n\tcolor: #ededed;\n"]);return Y=function(){return t},t}function G(){var t=Object(h.a)(["\n\tdisplay: flex;\n\talign-items: center;\n\toverflow-x: hidden;\n"]);return G=function(){return t},t}function X(){var t=Object(h.a)(["\n\tmargin: 0 8px 0 0;\n\tborder-radius: 50%;\n\theight: auto;\n\toverflow: hidden;\n\tobject-fit: cover;\n\theight: 30px;\n\twidth: 30px;\n\tmin-width: 30px;\n\tmin-height: 30px;\n"]);return X=function(){return t},t}function Z(){var t=Object(h.a)(["\n\tflex: 1;\n\tborder-radius: 4px;\n\tpadding: 2% 4%;\n\tmargin: 5px 0;\n\tfont-size: 14px;\n\tdisplay: flex;\n\tflex-direction: row;\n\tjustify-content: space-between;\n\talign-items: center;\n\tcursor: pointer;\n\t&:hover {\n\t\tbackground-color: #393939;\n\t}\n\t&[disabled] {\n\t\topacity: 0.5;\n\t}\n"]);return Z=function(){return t},t}var tt=x.c.div(Z()),nt=x.c.img(X()),et=x.c.div(G()),rt=x.c.h1(Y()),at=function(t){var n=t.disabled,e=void 0!==n&&n,r=t.children,o=t.title,i=t.img,c=void 0===i||i,u=t.userImage,l=void 0===u?"https://citas.in/media/authors/diego-maradona.detail.jpg":u;return a.a.createElement(tt,{disabled:e},a.a.createElement(et,null,c&&a.a.createElement(nt,{src:l}),a.a.createElement(rt,null,o)),r)},ot=function(){var t=Object(v.a)(b.a.mark((function t(n){var r,a,o,i,c,u,l,s,d;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e(95),a=e(42),o=[],i=function(t){var e=s(!0);l(e,t);var r=a("".concat("https://moran.mtprz.dev","/ws/signaling"));return r.on("connect",(function(){r.on("signal",(function(e){var a=e.id,i=e.offerOrAnswer,l=e.peerId;if("offer"===i.type&&a===n){var s=u(!1,t);c(s,r,l),s.signal(i),o.push({id:l,peer:s})}else if("answer"===i.type&&a===n){o.filter((function(t){return t.id===l}))[0].peer.signal(i)}})),r.on("joiner",(function(n){console.log("A new user has joined this room");var e=u(!0,t);c(e,r,n),o.push({id:n,peer:e})})),r.on("left",(function(t){console.log("A user has left the channel");var n=o.map((function(t){return t.id})).indexOf(t);n>-1&&(o[n].peer.destroy(),o.splice(n,1))})),r.on("you left room",(function(t){o.forEach((function(t){t.peer.destroy()})),o.splice(0,o.length)}))})),r},c=function(t,e,r){t.on("signal",(function(t){e.emit("signal",{id:r,offerOrAnswer:t,peerId:n})})),t.on("connect",(function(){console.log("A peer has just connected")})),t.on("error",(function(t){console.log(t)})),t.on("stream",(function(t){var n=s(!1);l(n,t)}))},u=function(t,n){return new r({initiator:t,trickle:!1,stream:n,config:{iceServers:[{urls:["stun:stun.l.google.com:19302"]},{urls:"turn:webrtcweb.com:7788",username:"muazkh",credential:"muazkh"}]}})},l=function(t,n){"srcObject"in t?t.srcObject=n:t.src=window.URL.createObjectURL(n),t.play()},s=function(t){var n=document.getElementById("videos"),e=document.createElement("video");return e.style.flexGrow=1,e.style.flexShrink=1,e.style.flexBasis="50%",e.volume=.3,e.muted=t,e.playsInline=!0,e.autoPlay=!0,n.appendChild(e),e},t.prev=8,t.next=11,navigator.mediaDevices.getUserMedia({video:!0,audio:!0});case 11:return d=t.sent,t.abrupt("return",i(d));case 15:t.prev=15,t.t0=t.catch(8),console.log(t.t0);case 18:case"end":return t.stop()}}),t,null,[[8,15]])})));return function(n){return t.apply(this,arguments)}}(),it=function(t){var n=t.server,e=t.username,o=function(){var t=Object(r.useState)(null),n=Object(l.a)(t,2),e=n[0],a=n[1];return[e,function(){var t=Object(v.a)(b.a.mark((function t(n){var r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==e){t.next=7;break}return t.next=3,ot(n);case 3:return r=t.sent,t.next=6,a(r);case 6:return t.abrupt("return",r);case 7:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}()]}(),i=Object(l.a)(o,2),c=i[0],u=i[1],s=function(){var t=Object(v.a)(b.a.mark((function t(n){var r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c){t.next=8;break}return t.next=3,u(e);case 3:(r=t.sent).emit("left",{id:e}),r.emit("join",{id:e,room:n}),t.next=10;break;case 8:c.emit("left",{id:e}),c.emit("join",{id:e,room:n});case 10:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}();return n.chats?a.a.createElement(V,{className:"column is-2"},a.a.createElement(Q,null,a.a.createElement(T,null,n.name)),a.a.createElement($,null,a.a.createElement(K,null,a.a.createElement(H,null,"Chats (text)"),n.chats.map((function(t,e){return a.a.createElement(J,{to:"/".concat(n._id,"/").concat(t._id),key:e},a.a.createElement(at,{img:!1,title:t.name}))}))),a.a.createElement("div",null,a.a.createElement(H,null,"Channels (voice)"),n.channels.map((function(t,n){return a.a.createElement(W,{key:n,onClick:function(){return s(t._id)}},a.a.createElement(at,{img:!1,title:t.name}))}))))):a.a.createElement($,{className:"column is-2"},a.a.createElement(T,null,"Server"),a.a.createElement("div",null,a.a.createElement("p",null,"Loading...")))};e(69);function ct(){var t=Object(h.a)(["\n    from {\n        width: 0%;\n        left: 50%;\n    }\n    to {\n        width: 70%;\n        left: 15%;\n    }\n"]);return ct=function(){return t},t}function ut(){var t=Object(h.a)(["\n    from {\n        transform: scale(1);\n    }\n    to {\n        transform: scale(1.1);\n    }\n"]);return ut=function(){return t},t}function lt(){var t=Object(h.a)(["\n    from {\n        filter: blur(0.2px);\n        border: 1px solid #ededed;\n    }\n\n    to {\n        filter: blur(0);\n        border: 1px solid rgb(140, 136, 168);\n    }\n"]);return lt=function(){return t},t}function st(){var t=Object(h.a)(["\n    from {\n        background-color: inherit;\n\t\tborder: 1px solid inherit;\n    }\n\n    to {\n\t\tbackground-color: #3b3b3b;\n\t\tborder: 1px solid #9b5134;\n    }\n"]);return st=function(){return t},t}function dt(){var t=Object(h.a)(["\n\t\tanimation: "," "," "," forwards;\n\t"]);return dt=function(){return t},t}function ft(){var t=Object(h.a)(["\n\t\tanimation: "," "," "," forwards;\n\t"]);return ft=function(){return t},t}function pt(){var t=Object(h.a)(["\n\t\tanimation: "," "," "," forwards; /* => forwards makes the animation stay as it finishes */\n\t"]);return pt=function(){return t},t}var mt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.time,e=void 0===n?"0.5s":n,r=t.type,a=void 0===r?"ease":r;return Object(x.b)(pt(),e,bt,a)},bt=Object(x.d)(st()),vt=(Object(x.d)(lt()),Object(x.d)(ut())),ht=Object(x.d)(ct());function xt(){var t=Object(h.a)(["\n\tcolor: #ededed;\n\tbackground-color: #b7b7b7;\n\tfont-size: 25px;\n\tfont-weight: bolder;\n\tpadding: 3%;\n\tborder-radius: 6px;\n"]);return xt=function(){return t},t}function gt(){var t=Object(h.a)(["\n\tpadding: 2%;\n"]);return gt=function(){return t},t}function jt(){var t=Object(h.a)(["\n\t-webkit-box-shadow: 0px -6px 12px -9px rgba(0, 0, 0, 0.75);\n\t-moz-box-shadow: 0px -6px 12px -9px rgba(0, 0, 0, 0.75);\n\tbox-shadow: 0px -6px 12px -9px rgba(0, 0, 0, 0.75);\n\tborder-top: 1px solid #3c3c3c;\n\tflex-grow: 0;\n\tflex-shrink: 0;\n\tflex-basis: 80px;\n\toverflow: hidden;\n\tpadding: 0 2%;\n"]);return jt=function(){return t},t}function wt(){var t=Object(h.a)(["\n\tbackground-color: #5e5e5e;\n\tborder: 0;\n\tborder-radius: 0 4px 4px 0;\n\theight: 50%;\n\twidth: 50px;\n\tmin-height: 40px;\n\tmin-width: 40px;\n\tpadding: 0;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tcursor: pointer;\n\t&:hover {\n\t\tbackground-color: #535353;\n\t}\n"]);return wt=function(){return t},t}function Et(){var t=Object(h.a)(["\n\tborder: 0;\n\tbackground-color: #5e5e5e;\n\tborder-radius: 4px 0 0 4px;\n\tmin-height: 40px;\n\theight: 50%;\n\twidth: 90%;\n\tcolor: #ededed;\n\tfont-weight: bolder;\n\tfont-size: 16px;\n\tpadding: 15px;\n\tfont-family: BalooPaaji;\n"]);return Et=function(){return t},t}function Ot(){var t=Object(h.a)(["\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tborder: 0;\n\theight: 30px;\n\twidth: 30px;\n\tpadding: 1px;\n\tborder-radius: 3px;\n\tbackground-color: inherit;\n\t&:hover {\n\t\t",";\n\t}\n"]);return Ot=function(){return t},t}function yt(){var t=Object(h.a)(["\n\tfont-size: 25px;\n\tfont-weight: bold;\n"]);return yt=function(){return t},t}function kt(){var t=Object(h.a)(["\n\tmargin: 0;\n\tpadding: 0;\n\twidth: 100%;\n\theight: 100%;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n"]);return kt=function(){return t},t}function _t(){var t=Object(h.a)(["\n\toverflow-y: auto;\n\tword-wrap: break-word;\n\tflex-grow: 18;\n\tflex-shrink: 18;\n\tcolor: #b7b7b7;\n\tdisplay: flex;\n\tflex-direction: column;\n"]);return _t=function(){return t},t}function zt(){var t=Object(h.a)(["\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n\tpadding: 12px 12px 12px 38px;\n\tbackground-color: #282828;\n\tcolor: #ededed;\n\tborder-bottom: 1px solid #3c3c3c;\n\tborder-top: 1px solid #3c3c3c;\n\tflex-grow: 0;\n\t-webkit-box-shadow: 0px 6px 12px -9px rgba(0, 0, 0, 0.75);\n\t-moz-box-shadow: 0px 6px 12px -9px rgba(0, 0, 0, 0.75);\n\tbox-shadow: 0px 6px 12px -9px rgba(0, 0, 0, 0.75);\n"]);return zt=function(){return t},t}function It(){var t=Object(h.a)(["\n\tpadding: 2%;\n\twidth: ",";\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\tflex-direction: column;\n\tbackground-color: #282828;\n\theight: calc(100vh - 60px - 50px);\n\tborder-top: 1px solid #3c3c3c;\n\tborder-left: 1px solid #3c3c3c;\n"]);return It=function(){return t},t}function Ct(){var t=Object(h.a)(["\n\tdisplay: flex;\n\tflex: 1;\n\tflex-wrap: wrap;\n"]);return Ct=function(){return t},t}function St(){var t=Object(h.a)(["\n\tpadding: 0;\n\tdisplay: flex;\n\tflex-direction: column;\n\tbackground-color: #282828;\n\theight: calc(100vh - 60px - 50px);\n"]);return St=function(){return t},t}function Mt(){var t=Object(h.a)(["\n\tflex: 1 1 50%;\n"]);return Mt=function(){return t},t}function Nt(){var t=Object(h.a)(["\n\tmargin: 0 0 20px 0;\n\tdisplay: flex;\n\tjustify-content: ",";\n"]);return Nt=function(){return t},t}function qt(){var t=Object(h.a)(["\n\tmargin: 0;\n"]);return qt=function(){return t},t}var Bt=x.c.div(qt()),Rt=x.c.div(Nt(),(function(t){return t.colapsed?"center":"flex-end"})),Pt=(x.c.video(Mt()),x.c.div(St())),Ut=x.c.div(Ct()),At=x.c.div(It(),(function(t){return t.colapsed?"8.33333333333333333333333333333333% !important":"33.3333333333333333333333333333333% !important"})),Dt=x.c.div(zt()),Ft=x.c.div(_t()),Lt=x.c.form(kt()),Vt=x.c.p(yt()),$t=x.c.button(Ot(),(function(t){return!t.disabled&&mt({time:"0.2s"})})),Qt=x.c.input(Et()),Tt=x.c.button(wt()),Ht=x.c.div(jt()),Kt=x.c.div(gt()),Wt=x.c.div(xt());function Jt(){var t=Object(h.a)(["\n\tfont-size: 16px;\n\tfont-weight: lighter;\n"]);return Jt=function(){return t},t}function Yt(){var t=Object(h.a)(["\n\tcolor: #c86740;\n\tcursor: pointer;\n\tfont-weight: bolder;\n\tfont-size: 17px;\n"]);return Yt=function(){return t},t}function Gt(){var t=Object(h.a)(["\n\tdisplay: flex;\n\tflex-direction: column;\n"]);return Gt=function(){return t},t}function Xt(){var t=Object(h.a)(["\n\tborder-radius: 50%;\n\toverflow: hidden;\n\tobject-fit: cover;\n\tmin-height: 40px;\n\tmin-width: 40px;\n\tmax-width: 40px;\n\tmax-height: 40px;\n\tmargin-left: 15px;\n\tmargin-right: 15px;\n\t-webkit-box-shadow: -6px 12px 6px -10px rgba(0, 0, 0, 0.75);\n\t-moz-box-shadow: -6px 12px 6px -10px rgba(0, 0, 0, 0.75);\n\tbox-shadow: -6px 12px 6px -10px rgba(0, 0, 0, 0.75);\n"]);return Xt=function(){return t},t}function Zt(){var t=Object(h.a)(["\n\tmax-width: 65%;\n\twidth: auto;\n\theight: auto;\n\tdisplay: flex;\n\tflex-direction: ",";\n"]);return Zt=function(){return t},t}function tn(){var t=Object(h.a)(["\n\t\t\t\t\t\t {\n\t\t\t\t\t\t\tborder-left: 10px solid #ededed;\n\t\t\t\t\t\t\tright: -10px;\n\t\t\t\t\t\t}\n\t\t\t\t  "]);return tn=function(){return t},t}function nn(){var t=Object(h.a)(["\n\t\t\t\t\t\t {\n\t\t\t\t\t\t\tborder-right: 10px solid #ededed;\n\t\t\t\t\t\t\tleft: -10px;\n\t\t\t\t\t\t}\n\t\t\t\t  "]);return nn=function(){return t},t}function en(){var t=Object(h.a)(["\n\tdisplay: flex;\n\talign-items: flex-end;\n\tflex-direction: row;\n\tposition: relative;\n\tbackground-color: #ededed;\n\tborder-radius: ",";\n\tcolor: #464646;\n\tpadding: 10px;\n\t&:after {\n\t\tcontent: '';\n\t\tposition: absolute;\n\t\ttop: 0px;\n\t\tborder-bottom: 10px solid transparent;\n\t\twidth: 0;\n\t\theight: 0;\n\t\tbox-shadow: ",";\n\t\t",";\n\t}\n"]);return en=function(){return t},t}function rn(){var t=Object(h.a)(["\n\topacity: 0.7;\n\tfont-size: 14px;\n\tmargin-left: 18px;\n"]);return rn=function(){return t},t}function an(){var t=Object(h.a)(["\n\tmin-width: 100%;\n\theight: auto;\n\tpadding: 5px 0;\n\tdisplay: flex;\n\tflex-direction: ",";\n\t&:first-child {\n\t\tmargin-top: auto;\n\t}\n"]);return an=function(){return t},t}var on=x.c.div(an(),(function(t){return t.isMine?"row-reverse":"row"})),cn=x.c.span(rn()),un=x.c.div(en(),(function(t){return t.isMine?"12px 0 12px 12px":"0 12px 12px 12px"}),(function(t){return t.isMine?"-2px 0 0 0 #ededed;":"2px 0 0 0 #ededed"}),(function(t){return t.isMine?Object(x.b)(tn()):Object(x.b)(nn())})),ln=x.c.div(Zt(),(function(t){return t.isMine?"row-reverse":"row"})),sn=x.c.img(Xt()),dn=x.c.span(Gt()),fn=x.c.h1(Yt()),pn=x.c.p(Jt()),mn=function(t){var n=t.message,e=n.headers,r=e.author,o=(e.spoiler,e.isMine),i=e.time,c=n.body;return a.a.createElement(on,{isMine:o},a.a.createElement(ln,{isMine:o},a.a.createElement(sn,{src:"https://citas.in/media/authors/diego-maradona.detail.jpg"}),a.a.createElement(un,{isMine:o},a.a.createElement(dn,null,!o&&a.a.createElement(fn,null,r.username),a.a.createElement(pn,null,c)),a.a.createElement(cn,null,i))))},bn=function(t){var n=t.initialValue,e=t.resetOnEsc,a=Object(r.useState)(n),o=Object(l.a)(a,2),i=o[0],c=o[1];return{value:i,onChange:function(t){return c(t.target.value)},onKeyDown:e?function(t){return 27===t.keyCode&&c("")}:null,setValue:c}},vn=e(13),hn=e(44),xn=e(76),gn=function(t){var n=t.sendMessage,e=t.chat,o=t.onClick,i=Object(r.useState)(!0),c=Object(l.a)(i,2),u=c[0],s=c[1],d=bn({initialValue:""}),f=Object(r.useRef)();Object(r.useEffect)((function(){f.current.scrollTo(0,f.current.scrollHeight)}),[]);var p=function(){var t=Object(v.a)(b.a.mark((function t(r){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.preventDefault(),""===d.value){t.next=5;break}return t.next=4,n(e._id,!1,d.value);case 4:f.current.scrollTo(0,f.current.scrollHeight);case 5:d.setValue("");case 6:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),m=u?hn.a:hn.b;return a.a.createElement(Bt,{className:"columns"},a.a.createElement(Pt,{className:"column ".concat(u?"is-11":"is-8")},a.a.createElement(Dt,null,a.a.createElement(Vt,null,e?"".concat(e.name,"'s chat"):"Chat"),a.a.createElement($t,{onClick:function(){return s(!u)}},a.a.createElement(m,{size:"20px",color:"#ededed"}))),a.a.createElement(Ft,{ref:f},e.messages&&e.messages.length>0?e.messages.map((function(t,n){return a.a.createElement(mn,{key:n,message:t})})):a.a.createElement(Kt,null,a.a.createElement(Wt,null,"No messages yet :("))),a.a.createElement(Ht,null,a.a.createElement(Lt,{onSubmit:p},a.a.createElement(Qt,Object.assign({type:"text",placeholder:"Your message on ".concat(e.name)},d)),a.a.createElement(Tt,null,a.a.createElement(vn.g,{color:"#ededed",size:"20px"}))))),a.a.createElement(At,{colapsed:u,className:"column ".concat(u?"is-1":"is-4")},a.a.createElement(Rt,{colapsed:u},a.a.createElement($t,{onClick:o},a.a.createElement(xn.a,{size:"16px",color:"#ededed"}))),a.a.createElement(Ut,{id:"videos"})))};function jn(){var t=Object(h.a)(["\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tborder: 0;\n\theight: 38px;\n\twidth: 38px;\n\tpadding: 0;\n\tborder-radius: 50%;\n\tbackground-color: inherit;\n\tposition: absolute;\n\tright: 10px;\n\t&:hover {\n\t\t",";\n\t}\n"]);return jn=function(){return t},t}function wn(){var t=Object(h.a)(["\n\theight: 60px;\n\tpadding: 7px;\n\toverflow-x: auto;\n\toverflow-y: hidden;\n\tbackground-color: #282828;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tposition: relative;\n"]);return wn=function(){return t},t}var En=x.c.div(wn()),On=x.c.button(jn(),(function(t){return!t.disabled&&mt({time:"0.2s"})}));function yn(){var t=Object(h.a)(["\n\t\t\t\t\t {\n\t\t\t\t\t\t&:after {\n\t\t\t\t\t\t\tcontent: '';\n\t\t\t\t\t\t\tposition: absolute;\n\t\t\t\t\t\t\ttop: -7px;\n\t\t\t\t\t\t\theight: 3px;\n\t\t\t\t\t\t\tbackground: #ededed;\n\t\t\t\t\t\t\tborder-radius: 0px 0px 7px 7px;\n\t\t\t\t\t\t\t",";\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttransform: scale(1.1);\n\t\t\t\t\t}\n\t\t\t  "]);return yn=function(){return t},t}function kn(){var t=Object(h.a)(["\n\t\t\t\t\t {\n\t\t\t\t\t\t&:hover {\n\t\t\t\t\t\t\t",";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t  "]);return kn=function(){return t},t}function _n(){var t=Object(h.a)(["\n\tmargin: 0 4px 0 4px;\n\tdisplay: inline-flex;\n\tborder-radius: 18%;\n\tposition: relative;\n\t",";\n"]);return _n=function(){return t},t}function zn(){var t=Object(h.a)(["\n\tborder-radius: 20%;\n\tborder: 1px solid #3c3b3b;\n\toverflow: hidden;\n\tobject-fit: cover;\n\twidth: 42px;\n\theight: 42px;\n\tmin-width: 42px;\n\tmin-height: 42px;\n"]);return zn=function(){return t},t}var In=x.c.img(zn()),Cn=Object(x.c)(f.a)(_n(),(function(t){return t.currentserver?Object(x.b)(yn(),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.time,e=void 0===n?"0.2s":n,r=t.type,a=void 0===r?"ease":r;return Object(x.b)(dt(),e,ht,a)}({time:"0.2s"})):Object(x.b)(kn(),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.time,e=void 0===n?"0.8s":n,r=t.type,a=void 0===r?"ease":r;return Object(x.b)(ft(),e,vt,a)}({time:"0.1s"}))})),Sn=function(t){var n=t._id,e=Object(l.a)(t.chats,1)[0],r=t.currentserver,o=void 0!==r&&r,i=t.img,c=void 0===i?"https://upload.wikimedia.org/wikipedia/commons/8/8f/Indio_Solari_2_color.jpg":i;return a.a.createElement(Cn,{currentserver:o,to:"/".concat(n,"/").concat(e._id)},a.a.createElement(In,{src:c}))},Mn=function(t){var n=t.currentServer,e=void 0!==n&&n,r=t.servers;return a.a.createElement(En,{className:"column is-12"},r.map((function(t,n){return a.a.createElement(Sn,Object.assign({},t,{currentserver:e===r[n]._id,key:n}))})),a.a.createElement(On,null,a.a.createElement(vn.a,{size:"28px",color:"#ededed"})))};function Nn(){var t=Object(h.a)(["\n    display: flex;\n    flex-direction: column;\n"]);return Nn=function(){return t},t}var qn=x.c.div(Nn()),Bn=function(t){var n=t.servers,e=t.sendMessage,r=t.chat,o=t.currentServer,i=t.onClick;return a.a.createElement(qn,{className:"column is-paddingless is-8"},a.a.createElement(Mn,{servers:n,currentServer:o}),a.a.createElement(gn,{sendMessage:e,chat:r,onClick:i}))};function Rn(){var t=Object(h.a)(["\n\tmargin: 25px 0 0 0;\n\toverflow-y: auto;\n\toverflow-x: auto;\n"]);return Rn=function(){return t},t}function Pn(){var t=Object(h.a)(["\n\toverflow-y: auto;\n"]);return Pn=function(){return t},t}function Un(){var t=Object(h.a)(["\n\tposition: fixed;\n\tfont-size: 20px !important;\n\tfont-weight: bold;\n\tmargin: 0 0 4px 0;\n\tcolor: #ededed;\n"]);return Un=function(){return t},t}function An(){var t=Object(h.a)(["\n\tfont-size: 15px !important;\n\tmargin: 9px 0 8px 4px;\n\tcolor: #ededed;\n"]);return An=function(){return t},t}function Dn(){var t=Object(h.a)(["\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tborder: 0;\n\theight: 30px;\n\twidth: 30px;\n\tpadding: 1px;\n\tborder-radius: 3px;\n\tbackground-color: inherit;\n\t&:hover {\n\t\t",";\n\t}\n"]);return Dn=function(){return t},t}function Fn(){var t=Object(h.a)(["\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n"]);return Fn=function(){return t},t}var Ln=x.c.div(Fn()),Vn=x.c.button(Dn(),(function(t){return!t.disabled&&mt({time:"0.2s"})})),$n=x.c.h2(An()),Qn=x.c.h1(Un()),Tn=x.c.div(Pn()),Hn=x.c.div(Rn()),Kn=function(t){var n=t.friends;return a.a.createElement(a.a.Fragment,null,a.a.createElement(Qn,null,"Friends"),a.a.createElement(Hn,null,a.a.createElement(Tn,null,a.a.createElement($n,null,"Online"),n.map((function(t,n){return a.a.createElement(at,{key:n,title:t.username},a.a.createElement(Ln,null,a.a.createElement(Vn,null,a.a.createElement(vn.e,{color:"#b7b7b7",size:"15px"}))))})),a.a.createElement($n,null,"Offline"),["Agustin","Santiago","Manuel","Agustin","Santiago","Manuel"].map((function(t,n){return a.a.createElement(at,{key:n,title:t,disabled:!0},a.a.createElement(Ln,null,a.a.createElement(Vn,null,a.a.createElement(vn.e,{size:"15px"}))))})))))},Wn=e(153);function Jn(){var t=Object(h.a)(["\n\tquery filterUsers($username: String!) {\n\t\tfilterUsers(username: $username) {\n\t\t\t_id\n\t\t\tusername\n\t\t}\n\t}\n"]);return Jn=function(){return t},t}var Yn=Object(c.b)(Jn()),Gn=function(t){var n=t.username,e=t.children;return a.a.createElement(Wn.b,{query:Yn,variables:{username:n}},e)};function Xn(){var t=Object(h.a)(["\n\tmutation($userId: ID!) {\n\t\taddFriend(userId: $userId) {\n\t\t\t_id\n\t\t\tusername\n\t\t}\n\t}\n"]);return Xn=function(){return t},t}var Zn=Object(c.b)(Xn()),te=function(t){var n=t.children;return a.a.createElement(Wn.a,{mutation:Zn},n)};function ne(){var t=Object(h.a)(["\n    display: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tborder: 0;\n\theight: 30px;\n\twidth: 30px;\n\tpadding: 1px;\n\tborder-radius: 3px;\n\tbackground-color: inherit;\n\t&:hover {\n\t\t",";\n\t}\n"]);return ne=function(){return t},t}function ee(){var t=Object(h.a)(["\n    overflow-y: auto;\n\tcolor: #ededed;\n"]);return ee=function(){return t},t}function re(){var t=Object(h.a)(["\n    font-family: BalooPaaji;\n    font-size: 22px;\n    font-weight: bold;\n\tcolor: #ededed;\n\tmargin: 0 0 5px 0;\n"]);return re=function(){return t},t}var ae=x.c.h1(re()),oe=x.c.div(ee()),ie=x.c.button(ne(),(function(t){return!t.disabled&&mt({time:"0.2s"})})),ce=function(t){var n=t.users,e=t.friends,r=t.onClick;return a.a.createElement("div",null,a.a.createElement(ae,null,"Results"),a.a.createElement(oe,null,n&&n.length>0?n.map((function(t,n){var o=t.username,i=t._id,c=e.includes(i)?vn.e:vn.f;return a.a.createElement(at,{key:n,title:o},a.a.createElement(ie,{onClick:function(){r({userId:i})}},a.a.createElement(c,{color:"#b7b7b7",size:"15px"})))})):a.a.createElement("h1",null,"No users found")))};function ue(){var t=Object(h.a)(["\n    font-family: BalooPaaji;\n    font-size: 22px;\n    font-weight: bold;\n\tcolor: #ededed;\n\tmargin: 0 0 5px 0;\n"]);return ue=function(){return t},t}var le=x.c.h1(ue()),se=function(t){var n=t.keyword,e=t.friends;return a.a.createElement(te,null,(function(t){var r=function(n){var e=n.userId;t({variables:{userId:e}}).catch((function(t){return t}))};return a.a.createElement(Gn,{username:n},(function(t){var n=t.loading,o=t.data;return n?a.a.createElement(le,null,"Results"):a.a.createElement(ce,{users:o&&o.filterUsers,friends:e,onClick:r})}))}))};function de(){var t=Object(h.a)(["\n\tborder: 0;\n\tbackground-color: #5e5e5e;\n\tborder-radius: 4px;\n\tcolor: #ededed;\n\tfont-weight: bold;\n\theight: 32px;\n\twidth: 100%;\n\tpadding: 5px 10px;\n\tfont-family: BalooPaaji;\n"]);return de=function(){return t},t}function fe(){var t=Object(h.a)(["\n\tposition: absolute;\n\ttop: -8px;\n\tleft: 20px;\n\tborder-radius: 50% !important;\n\tpadding: 0 7px !important;\n\tborder: 2px solid #dbdbdb;\n\tcolor: #ffffff !important;\n\tbackground-color: #cc6b44 !important;\n"]);return fe=function(){return t},t}function pe(){var t=Object(h.a)(["\n\tpadding: 6% 6% 6% 6%;\n\tdisplay: flex;\n\tjustify-content: space-between;\n"]);return pe=function(){return t},t}function me(){var t=Object(h.a)([""]);return me=function(){return t},t}function be(){var t=Object(h.a)(["\n\tfont-size: 15px !important;\n\tmargin: 9px 0 8px 4px;\n\tcolor: #ededed;\n"]);return be=function(){return t},t}function ve(){var t=Object(h.a)(["\n\tpadding: 4px;\n\tborder: 1px solid #4b4b4b;\n\tbackground-color: #424242;\n\ttext-align: center;\n"]);return ve=function(){return t},t}function he(){var t=Object(h.a)(["\n\tleft: -20px;\n\twidth: 240px;\n\tpadding: 0;\n"]);return he=function(){return t},t}function xe(){var t=Object(h.a)(["\n\tposition: relative;\n"]);return xe=function(){return t},t}function ge(){var t=Object(h.a)(["\n\tposition: absolute;\n\tpadding: 5px;\n\tright: 4px;\n\ttop: 10%;\n\theight: 80%;\n\tborder: 0;\n\tbackground-color: inherit;\n\tborder-radius: 3px;\n\t&:hover {\n\t\tbackground-color: #535353;\n\t}\n"]);return ge=function(){return t},t}function je(){var t=Object(h.a)(["\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tborder: 0;\n\theight: 30px;\n\twidth: 30px;\n\tpadding: 1px;\n\tborder-radius: 3px;\n\tbackground-color: inherit;\n\t&:hover {\n\t\t",";\n\t}\n"]);return je=function(){return t},t}function we(){var t=Object(h.a)(["\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n"]);return we=function(){return t},t}var Ee=x.c.div(we()),Oe=x.c.button(je(),(function(t){return!t.disabled&&mt({time:"0.2s"})})),ye=x.c.button(ge()),ke=x.c.div(xe()),_e=x.c.div(he()),ze=x.c.div(ve()),Ie=x.c.h2(be()),Ce=x.c.div(me()),Se=x.c.div(pe()),Me=x.c.span(fe()),Ne=x.c.input(de()),qe=e(81),Be=function(t){var n=t.friendRequests,e=t.addNewFriend,r=t.friendSearchInput;return a.a.createElement(Ce,null,a.a.createElement(ke,null,a.a.createElement(Ne,{placeholder:"Find new friends",type:"text",value:r.value,onChange:r.onChange,onKeyDown:r.onKeyDown}),r.value&&a.a.createElement(ye,{onClick:function(){return r.setValue("")}},a.a.createElement(vn.b,{color:"#b7b7b7",size:"15px"}))),a.a.createElement(Se,null,a.a.createElement("div",{className:"dropdown is-up is-hoverable"},a.a.createElement(qe.a,{color:"#b7b7b7",size:"30px",className:"dropdown-trigger"},a.a.createElement("button",{className:"button","aria-haspopup":"true","aria-controls":"dropdown-menu4"},a.a.createElement("span",null,a.a.createElement(Ie,{className:"is-marginless"},"Friend Requests")),a.a.createElement("span",{className:"icon is-small"},a.a.createElement("i",{className:"fas fa-angle-down","aria-hidden":"true"})))),a.a.createElement(_e,{className:"dropdown-menu",id:"dropdown-menu4",role:"menu"},a.a.createElement(ze,{className:"dropdown-content is-paddingless"},a.a.createElement("div",{className:"dropdown-item is-paddingless"},a.a.createElement(te,null,(function(t,r){var o=r.loading;return n.length>0?n.map((function(n,r){var i=n.username,c=n._id;return a.a.createElement(at,{key:r,title:i},a.a.createElement(Ee,{disabled:o},a.a.createElement(Oe,{disabled:o,onClick:function(){!function(n){var r=n.userId,a=n.username;t({variables:{userId:r}}).then((function(){e({_id:r,username:a})})).catch((function(t){return t}))}({userId:c,username:i})}},a.a.createElement(vn.d,{color:"#b7b7b7",size:"15px"})),a.a.createElement(Oe,{disabled:o},a.a.createElement(vn.b,{color:"#b7b7b7",size:"15px"}))))})):a.a.createElement(Ie,null,"You don't have friend requests")}))))),n.length>0&&a.a.createElement(Me,{className:"tag"},n.length)),a.a.createElement(vn.h,{color:"#b7b7b7",size:"30px",onClick:function(){alert("Settings!")}})))};function Re(){var t=Object(h.a)(["\n\tpadding: 11px 11px 0 11px;\n\tbackground-color: #3c3c3c;\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: space-between;\n\tflex-grow: 1;\n"]);return Re=function(){return t},t}var Pe=x.c.div(Re()),Ue=function(t){var n=t.friends,e=t.friendRequests,r=t.addNewFriend,o=(t.removeFriend,bn({initialValue:"",resetOnEsc:!0})),i=n.map((function(t){return t._id}));return a.a.createElement(Pe,{className:"column is-2"},o.value?a.a.createElement(se,{keyword:o.value,friends:i}):a.a.createElement(Kn,{friends:n}),a.a.createElement(Be,{friendRequests:e,addNewFriend:r,friendSearchInput:o}))};function Ae(){var t=Object(h.a)(["\n   position: absolute;\n   top: 5px;\n   right: 5px;\n"]);return Ae=function(){return t},t}function De(){var t=Object(h.a)(["\n\tposition: relative;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\theight: 80%;\n\tflex: 0 1 80vw;\n\tbackground-color: #242424;\n\ttext-align: center;\n\tborder-radius: 4px;\n\tborder: 1px solid #3c3c3c;\n"]);return De=function(){return t},t}function Fe(){var t=Object(h.a)(["\n\twidth: 100%;\n\theight: 100%;\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\tbackground-color: rgba(0, 0, 0, 0.8);\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n"]);return Fe=function(){return t},t}var Le=x.c.div(Fe()),Ve=x.c.div(De()),$e=x.c.div(Ae()),Qe=function(t){var n=t.onClick;return a.a.createElement(Le,null,a.a.createElement(Ve,null,a.a.createElement($e,null,a.a.createElement(vn.c,{style:{cursor:"pointer"},color:"#ededed",size:"24px",onClick:n}))))};function Te(){var t=Object(h.a)(["\n\tdisplay: flex;\n    margin: 0;\n    height: -webkit-calc(100% - 50px);\n    height: -moz-calc(100% - 50px);\n    height: calc(100% - 50px);\n    font-family: BalooPaaji;\n"]);return Te=function(){return t},t}function He(){var t=Object(h.a)(["\n\tdisplay: flex;\n\tflex-flow: column;\n\theight: 100vh;\n"]);return He=function(){return t},t}var Ke=x.c.div(He()),We=x.c.div(Te()),Je=function(t){var n=t.addNewFriend,e=t.sendMessage,o=t.userData,i=t.server,c=t.chat,u=Object(r.useState)(!1),s=Object(l.a)(u,2),d=s[0],f=s[1];return a.a.createElement(Ke,null,a.a.createElement(q,{username:o.username}),a.a.createElement(We,null,a.a.createElement(it,{server:i,username:o.username}),a.a.createElement(Bn,{servers:o.servers,chat:c,currentServer:i._id,onClick:function(){return f(!0)},sendMessage:e}),a.a.createElement(Ue,{friends:o.friends,friendRequests:o.friendRequests,addNewFriend:n})),d&&a.a.createElement(Qe,{id:"videosModal",onClick:function(){return f(!1)}}))};function Ye(){var t=Object(h.a)(["\n\tanimation: rotate 2s linear infinite;\n\tmargin: -25px 0 0 -25px;\n\twidth: 50px;\n\theight: 50px;\n\n\t& .path {\n\t\tstroke: #c86740;\n\t\tstroke-linecap: round;\n\t\tanimation: dash 1.5s ease-in-out infinite;\n\t}\n\n\t@keyframes rotate {\n\t\t100% {\n\t\t\ttransform: rotate(360deg);\n\t\t}\n\t}\n\t@keyframes dash {\n\t\t0% {\n\t\t\tstroke-dasharray: 1, 150;\n\t\t\tstroke-dashoffset: 0;\n\t\t}\n\t\t50% {\n\t\t\tstroke-dasharray: 90, 150;\n\t\t\tstroke-dashoffset: -35;\n\t\t}\n\t\t100% {\n\t\t\tstroke-dasharray: 90, 150;\n\t\t\tstroke-dashoffset: -124;\n\t\t}\n\t}\n"]);return Ye=function(){return t},t}function Ge(){var t=Object(h.a)(["\n    font-family: BalooPaaji;\n    font-size: 30px;\n\tfont-weight: bold;\n    margin: 25px 0 0 0;\n\tcolor: #ededed;\n"]);return Ge=function(){return t},t}function Xe(){var t=Object(h.a)(["\n\tdisplay: flex;\n    flex-direction: column;\n\theight: 100vh;\n\twidth: 100vw;\n\tjustify-content: center;\n\talign-items: center;\n    background-color: #373737;\n"]);return Xe=function(){return t},t}var Ze=x.c.div(Xe()),tr=x.c.h1(Ge()),nr=x.c.svg(Ye()),er=function(t){var n=t.message,e=void 0===n?"Loading":n;return a.a.createElement(Ze,null,a.a.createElement(nr,{viewBox:"0 0 50 50"},a.a.createElement("circle",{className:"path",cx:"25",cy:"25",r:"20",fill:"none",strokeWidth:"4"})),a.a.createElement(tr,null,e))};function rr(){var t=Object(h.a)(["\n\tquery getMe {\n\t\tgetMe {\n\t\t\t_id\n\t\t\tusername\n\t\t\tservers {\n\t\t\t\t_id\n\t\t\t\tname\n\t\t\t\tchats {\n\t\t\t\t\t_id\n\t\t\t\t\tname\n\t\t\t\t\tmessages {\n\t\t\t\t\t\theaders {\n\t\t\t\t\t\t\tauthor {\n\t\t\t\t\t\t\t\tusername\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbody\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tchannels {\n\t\t\t\t\t_id\n\t\t\t\t\tname\n\t\t\t\t}\n\t\t\t}\n\t\t\tfriends {\n\t\t\t\t_id\n\t\t\t\tusername\n\t\t\t}\n\t\t\tfriendRequests {\n\t\t\t\t_id\n\t\t\t\tusername\n\t\t\t}\n\t\t}\n\t}\n"]);return rr=function(){return t},t}var ar=Object(c.b)(rr()),or=function(t){var n=t.children,e=t.onCompleted;return a.a.createElement(Wn.b,{query:ar,onCompleted:e},n)},ir=e(42),cr=e.n(ir),ur=a.a.memo((function(t){var n=t.serverId,e=t.chatId,o=t.navigate,i=function(){var t=Object(r.useState)(void 0),n=Object(l.a)(t,2),e=n[0],a=n[1],o=Object(r.useState)(!0),i=Object(l.a)(o,2),c=i[0],u=i[1];Object(r.useEffect)((function(){if(!c){var t=cr()("".concat("https://moran.mtprz.dev","/ws/servers")),n=e.servers.map((function(t){var n=t.chats.map((function(t){return t._id})),e=t.channels.map((function(t){return t._id}));return{_id:t._id,chats:n,channels:e}}));t.on("connect",Object(v.a)(b.a.mark((function r(){return b.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,u(t);case 2:t.emit("setup",n),t.on("message",(function(t){var n=t.server,r=t.chat,o=t.data,i=e.servers.filter((function(t){return t._id===n})),c=Object(l.a)(i,1)[0].chats.filter((function(t){return t._id===r}));Object(l.a)(c,1)[0].messages.push(o),a((function(t){return Object(p.a)({},t)}))}));case 4:case"end":return r.stop()}}),r)}))))}return Object(v.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!c||!c.disconnect){t.next=4;break}return c.disconnect(),t.next=4,u(void 0);case 4:case"end":return t.stop()}}),t)})))}),[c]);return{userData:e,setUserData:a,setSocket:u,sendMessage:function(t,n,r){var o=e.servers.filter((function(n){return n.chats.filter((function(n){var e=n._id;return t===e})).length>0})),i=Object(l.a)(o,1)[0].chats.filter((function(n){return n._id===t})),u=Object(l.a)(i,1)[0],s=new Date;u.messages.push({headers:{author:{_id:e._id,username:e.username},spoiler:n,isMine:!0,time:"".concat(s.getHours(),":").concat(s.getMinutes())},body:r}),c.emit("message",{chat:t,data:{headers:{author:{_id:e._id,username:e.username},spoiler:n,isMine:!1,time:"".concat(s.getHours(),":").concat(s.getMinutes())},body:r}}),a(Object(p.a)({},e))}}}(),c=i.userData,u=i.setUserData,s=i.setSocket,d=i.sendMessage;return a.a.createElement(or,{onCompleted:function(){var t=Object(v.a)(b.a.mark((function t(n){var e;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=n.getMe,t.next=3,u(e);case 3:s(void 0);case 4:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}()},(function(t){var r=t.loading,i=t.error;if(r||!c)return a.a.createElement(er,{message:"Loading..."});if(i)return"Internal server error";var l=n?c.servers.filter((function(t){return t._id===n}))[0]:c.servers[0]._id,s=e&&l?l.chats.filter((function(t){return t._id===e}))[0]:c.servers[0].chats[0]._id;n&&e||o("/".concat(l,"/").concat(s));return a.a.createElement(Je,{userData:c,server:l,chat:s,sendMessage:d,addNewFriend:function(t){var n=c.friends,e=c.friendRequests;n.push(t);var r=e.filter((function(n){return n._id===t._id})),a=e.indexOf(r[0]);a>-1&&e.splice(a,1),u(Object(p.a)({},c))}})}))}),(function(t,n){return t.serverId!==n.serverId&&t.channelId!==n.channelId}));function lr(){var t=Object(h.a)(["\n\t\t\t\t\t\tquery getMe {\n\t\t\t\t\t\t\tgetMe {\n\t\t\t\t\t\t\t\t_id\n\t\t\t\t\t\t\t\tusername\n\t\t\t\t\t\t\t\tservers {\n\t\t\t\t\t\t\t\t\t_id\n\t\t\t\t\t\t\t\t\tname\n\t\t\t\t\t\t\t\t\tchats {\n\t\t\t\t\t\t\t\t\t\t_id\n\t\t\t\t\t\t\t\t\t\tname\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tchannels {\n\t\t\t\t\t\t\t\t\t\t_id\n\t\t\t\t\t\t\t\t\t\tname\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tfriends {\n\t\t\t\t\t\t\t\t\t_id\n\t\t\t\t\t\t\t\t\tusername\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tfriendRequests {\n\t\t\t\t\t\t\t\t\t_id\n\t\t\t\t\t\t\t\t\tusername\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t"]);return lr=function(){return t},t}function sr(){var t=Object(h.a)(["\n\tmutation logIn($input: UserCredentials!) {\n\t\tlogIn(input: $input)\n\t}\n"]);return sr=function(){return t},t}var dr=Object(c.b)(sr()),fr=function(t){var n=t.children;return a.a.createElement(Wn.a,{mutation:dr,awaitRefetchQueries:!0,refetchQueries:function(t){var n=t.data.logIn;return window.sessionStorage.setItem("token",n),[{query:Object(c.b)(lr())}]}},n)};function pr(){var t=Object(h.a)(["\n\ttext-decoration: none;\n"]);return pr=function(){return t},t}function mr(){var t=Object(h.a)(["\n\tcolor: red;\n\tfont-size: 14px;\n"]);return mr=function(){return t},t}function br(){var t=Object(h.a)(["\n\tfont-size: 26px;\n\tfont-weight: bold;\n\tpadding: 8px 0;\n\tfont-family: BalooPaaji;\n\tcolor: #ededed;\n"]);return br=function(){return t},t}function vr(){var t=Object(h.a)(["\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\theight: 100vh;\n\tpadding: 0;\n\tbackground-color: #373737;\n"]);return vr=function(){return t},t}function hr(){var t=Object(h.a)(["\n\tanimation: rotate 2s linear infinite;\n\twidth: 18px;\n\theight: 18px;\n\n\t& .path {\n\t\tstroke: #ededed;\n\t\tstroke-linecap: round;\n\t\tanimation: dash 1.5s ease-in-out infinite;\n\t}\n\n\t@keyframes rotate {\n\t\t100% {\n\t\t\ttransform: rotate(360deg);\n\t\t}\n\t}\n\t@keyframes dash {\n\t\t0% {\n\t\t\tstroke-dasharray: 1, 150;\n\t\t\tstroke-dashoffset: 0;\n\t\t}\n\t\t50% {\n\t\t\tstroke-dasharray: 90, 150;\n\t\t\tstroke-dashoffset: -35;\n\t\t}\n\t\t100% {\n\t\t\tstroke-dasharray: 90, 150;\n\t\t\tstroke-dashoffset: -124;\n\t\t}\n\t}\n"]);return hr=function(){return t},t}function xr(){var t=Object(h.a)(["\n\tbackground-color: #373737;\n"]);return xr=function(){return t},t}function gr(){var t=Object(h.a)(["\n\tborder: 1px solid #ededed;\n\tbackground-color: #ededed;\n\tborder-radius: 4px;\n\theight: 35px;\n\twidth: 100%;\n\tpadding: 5px 10px;\n\tfont-family: BalooPaaji;\n\tmargin: 8px 0;\n\t&[disabled] {\n\t\topacity: 0.3;\n\t}\n\t&:hover {\n\t\tbackground-color: #e8e8e8;\n\t}\n"]);return gr=function(){return t},t}function jr(){var t=Object(h.a)(["\n\tfont-family: BalooPaaji;\n\tfont-size: 12px;\n\tcolor: #ededed;\n"]);return jr=function(){return t},t}function wr(){var t=Object(h.a)(["\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: center;\n\tborder-radius: 3px;\n\tpadding: 5%;\n\tbackground-color: #2d2d2d;\n\t-webkit-box-shadow: 0px 8px 40px -19px rgba(0, 0, 0, 0.75);\n\t-moz-box-shadow: 0px 8px 40px -19px rgba(0, 0, 0, 0.75);\n\tbox-shadow: 0px 8px 40px -19px rgba(0, 0, 0, 0.75);\n"]);return wr=function(){return t},t}var Er=x.c.form(wr()),Or=x.c.span(jr()),yr=x.c.input(gr()),kr=x.c.div(xr()),_r=x.c.svg(hr()),zr=x.c.div(vr()),Ir=x.c.h2(br()),Cr=x.c.span(mr()),Sr=Object(x.c)(f.a)(pr());function Mr(){var t=Object(h.a)(["\n    background-color: #c86740;\n    border: 0;\n    border-radius: 3px;\n    color: #ffffff;\n    height: 32px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 100%;\n    margin: 8px 0;\n    text-align: center;\n    font-family: BalooPaaji;\n    &[disabled] {\n        opacity: .3;\n    }\n"]);return Mr=function(){return t},t}var Nr=x.c.button(Mr()),qr=function(t){var n=t.children,e=t.onClick,r=t.disabled;return a.a.createElement(Nr,{disabled:r,onClick:e},n)},Br=function(t){var n=t.disabled,e=t.onSubmit,o=t.error,i=t.title,c=bn({initialValue:"",resetOnEsc:!1}),u=bn({initialValue:"",resetOnEsc:!1}),l=bn({initialValue:"",resetOnEsc:!1}),s=Object(r.useRef)(),d=function(){var t=Object(v.a)(b.a.mark((function t(n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,e({username:c.value,email:u.value,password:l.value});case 3:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}();return Object(r.useEffect)((function(){return s.current.focus()}),[]),a.a.createElement(kr,null,a.a.createElement(zr,{className:"column is-4 is-offset-4"},a.a.createElement(Er,{disabled:n,onSubmit:d},a.a.createElement(Ir,null,i),a.a.createElement(yr,{ref:s,disabled:n,placeholder:"Username",value:c.value,onChange:c.onChange}),"Sign Up"===i&&a.a.createElement(yr,{disabled:n,placeholder:"Email",type:"email",value:u.value,onChange:u.onChange}),a.a.createElement(yr,{disabled:n,placeholder:"Password",type:"password",value:l.value,onChange:l.onChange}),o&&a.a.createElement(Cr,null,o),a.a.createElement(qr,{disabled:n},n?a.a.createElement(_r,{viewBox:"0 0 50 50"},a.a.createElement("circle",{className:"path",cx:"25",cy:"25",r:"20",fill:"none",strokeWidth:"4"})):i),"Login"===i?a.a.createElement(Or,null,"New here?",a.a.createElement(Sr,{to:"/signup"}," Create an account")):a.a.createElement(Or,null,"Already have an account?",a.a.createElement(Sr,{to:"/login"}," Login here")))))},Rr=function(){var t=Object(r.useContext)(s).activateAuth;return a.a.createElement(fr,null,(function(n,e){var r=e.loading,o=e.error&&"Wrong username or password";return a.a.createElement(Br,{onSubmit:function(e){var r=e.username,a=e.password;n({variables:{input:{username:r,password:a}}}).then(t).catch((function(t){return t}))},disabled:r,error:o,title:"Login"})}))};function Pr(){var t=Object(h.a)(["\n\t\t\t\t\t\tquery getMe {\n\t\t\t\t\t\t\tgetMe {\n\t\t\t\t\t\t\t\t_id\n\t\t\t\t\t\t\t\tusername\n\t\t\t\t\t\t\t\tservers {\n\t\t\t\t\t\t\t\t\t_id\n\t\t\t\t\t\t\t\t\tname\n\t\t\t\t\t\t\t\t\tchats {\n\t\t\t\t\t\t\t\t\t\t_id\n\t\t\t\t\t\t\t\t\t\tname\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tchannels {\n\t\t\t\t\t\t\t\t\t\t_id\n\t\t\t\t\t\t\t\t\t\tname\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tfriends {\n\t\t\t\t\t\t\t\t\t_id\n\t\t\t\t\t\t\t\t\tusername\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tfriendRequests {\n\t\t\t\t\t\t\t\t\t_id\n\t\t\t\t\t\t\t\t\tusername\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t"]);return Pr=function(){return t},t}function Ur(){var t=Object(h.a)(["\n\tmutation signUp($input: UserInput!) {\n\t\tsignUp(input: $input)\n\t}\n"]);return Ur=function(){return t},t}var Ar=Object(c.b)(Ur()),Dr=function(t){var n=t.children;return a.a.createElement(Wn.a,{mutation:Ar,awaitRefetchQueries:!0,refetchQueries:function(t){var n=t.data.signUp;return window.sessionStorage.setItem("token",n),[{query:Object(c.b)(Pr())}]}},n)},Fr=function(){var t=Object(r.useContext)(s).activateAuth;return a.a.createElement(Dr,null,(function(n,e){var r=e.loading,o=e.error,i=o&&o.graphQLErrors&&o.graphQLErrors[0].message;return a.a.createElement(Br,{onSubmit:function(e){var r=e.username,a=e.email,o=e.password;n({variables:{input:{username:r,email:a,password:o}}}).then(t).catch((function(t){return t}))},disabled:r,error:i,title:"Sign Up"})}))},Lr=function(){return a.a.createElement("h1",null,"404 - Not Found")},Vr=e(45),$r=e.n(Vr),Qr=e(46),Tr=e.n(Qr);function Hr(){var t=Object(h.a)(["\n  \thtml, body {\n\t\theight: 100%;\n        width: 100%;\n        margin: 0;\n        scroll-behavior: smooth;\n  \t}\n\n  \th1, h2, h3, h4, h5, h6 {\n\t\toverflow: hidden;\n  \t}\n\n\t@font-face {\n        font-family: 'Montserrat';\n        src: local('Montserrat'), local('Montserrat'),\n        url(",") format('woff2'),\n        url(",") format('woff');\n        font-weight: 300;\n        font-style: normal;\n    }\n    \n\t@font-face {\n        font-family: 'BalooPaaji';\n        src: local('BalooPaaji'), local('BalooPaaji'),\n        url(",") format('woff2'),\n        url(",") format('woff');\n        font-weight: 300;\n        font-style: normal;\n    }\n"]);return Hr=function(){return t},t}var Kr=Object(x.a)(Hr(),$r.a,$r.a,Tr.a,Tr.a),Wr=new c.a({uri:"".concat("https://moran.mtprz.dev","/api"),request:function(t){var n=window.sessionStorage.getItem("token"),e=n||"";t.setContext({headers:{authorization:e}})},onError:function(t){var n=t.graphQLErrors;n&&"User must be authorized"===n[0].message&&(window.sessionStorage.removeItem("token"),window.location.href="/")}});i.a.render(a.a.createElement(d,null,a.a.createElement(u.a,{client:Wr},a.a.createElement((function(){var t=Object(r.useContext)(s).isAuth;return a.a.createElement(a.a.Fragment,null,a.a.createElement(Kr,null),a.a.createElement(f.c,null,a.a.createElement(Lr,{default:!0}),!t&&a.a.createElement(Rr,{path:"/login"}),!t&&a.a.createElement(Rr,{path:"/login/:serverId/:chatId"}),!t&&a.a.createElement(Fr,{path:"/signup"}),!t&&a.a.createElement(f.b,{noThrow:!0,from:"/",to:"/login"}),!t&&a.a.createElement(f.b,{noThrow:!0,from:"/:serverId/:chatId",to:"/login/:serverId/:chatId"}),t&&a.a.createElement(ur,{path:"/"}),t&&a.a.createElement(ur,{path:"/:serverId/:chatId"}),t&&a.a.createElement(f.b,{noThrow:!0,from:"/login",to:"/"}),t&&a.a.createElement(f.b,{noThrow:!0,from:"/login/:serverId/:chatId",to:"/:serverId/:chatId"}),t&&a.a.createElement(f.b,{noThrow:!0,from:"/signup",to:"/"})))}),null))),document.getElementById("app"))},45:function(t,n,e){t.exports=e.p+"static/media/Montserrat-Regular.ee653992.ttf"},46:function(t,n,e){t.exports=e.p+"static/media/BalooPaaji2-Regular.9b538d73.ttf"},83:function(t,n,e){t.exports=e(151)}},[[83,1,2]]]);
//# sourceMappingURL=main.52dc2eda.chunk.js.map